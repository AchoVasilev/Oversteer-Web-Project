@model AddCarFormModel

@{
    ViewData["Title"] = "Add Car";
}

<div class="row">
    <div class="col-sm-12 offset-lg-2 col-lg-8 offset-xl-3 col-xl-6">
        <h2 class="heading-margin text-center">Add Car</h2>

        <form method="post">
            <div class="form-row">
                <div class="col">
                    <div class="form-group">
                        <label asp-for="BrandId"></label>
                        <select asp-for="BrandId" id="selectcat" class="form-control">
                            <option value="" class="rhth">Select Brand</option>
                            @foreach (var carBrand in Model.Brands)
                            {
                                <option class="@carBrand.Id" value="@carBrand.Id">@carBrand.Name</option>
                            }
                        </select>
                        <span asp-validation-for="BrandId" class="small text-danger"></span>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label asp-for="ModelId"></label>
                        <select asp-for="ModelId" id="selectprod" class="form-control">
                            <option value="" class="rhth23">Select Model</option>
                            @foreach (var carModel in Model.CarModels)
                            {
                                @if (carModel.Id == null)
                                {
                                    continue;
                                }

                                <option value="@carModel.Id" class="selectors @carModel.CarBrandId">@carModel.Name</option>
                            }
                        </select>
                        <span asp-validation-for="ModelId" class="small text-danger"></span>
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="col">
                    <div class="form-group">
                        <label asp-for="Year"></label>
                        <input asp-for="Year" class="form-control" placeholder="Example: @DateTime.Now.Year">
                        <span asp-validation-for="Year" class="small text-danger"></span>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label asp-for="ColorId"></label>
                        <select asp-for="ColorId" class="form-control">
                            @foreach (var color in Model.Colors)
                            {
                                <option value="@color.Id">@color.Name</option>
                            }
                        </select>
                        <span asp-validation-for="ColorId" class="small text-danger"></span>
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="col">
                    <div class="form-group">
                        <label asp-for="FuelId"></label>
                        <select asp-for="FuelId" class="form-control">
                            @foreach (var fuelType in Model.FuelTypes)
                            {
                                <option value="@fuelType.Id">@fuelType.Name</option>
                            }
                        </select>
                        <span asp-validation-for="FuelId" class="small text-danger"></span>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label asp-for="TransmissionId"></label>
                        <select asp-for="TransmissionId" class="form-control">
                            @foreach (var transmission in Model.Transmissions)
                            {
                                <option value="@transmission.Id">@transmission.Name</option>
                            }
                        </select>
                        <span asp-validation-for="TransmissionId" class="small text-danger"></span>
                    </div>
                </div>
            </div>
            <div class="form-row">
                <div class="col">
                    <div class="form-group">
                        <label asp-for="CarTypeId"></label>
                        <select asp-for="CarTypeId" class="form-control">
                            @foreach (var carType in Model.CarTypes)
                            {
                                <option value="@carType.Id">@carType.Name</option>
                            }
                        </select>
                        <span asp-validation-for="CarTypeId" class="small text-danger"></span>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label asp-for="SeatsCount"></label>
                        <input asp-for="SeatsCount" class="form-control" placeholder="Example: 4">
                        <span asp-validation-for="SeatsCount" class="small text-danger"></span>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label asp-for="DailyPrice"></label>
                <input asp-for="DailyPrice" class="form-control" placeholder="Example: 230.02">
                <span asp-validation-for="DailyPrice" class="small text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="ImageUrl"></label>
                <input asp-for="ImageUrl" class="form-control" placeholder="Your fine URL here...">
                <span asp-validation-for="ImageUrl" class="small text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Description"></label>
                <textarea asp-for="Description" rows="4" class="form-control" placeholder="This is the perfect car..."></textarea>
                <span asp-validation-for="Description" class="small text-danger"></span>
            </div>
            <input class="btn btn-primary" type="submit" value="Save" />
        </form>
    </div>
</div>

@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.js"
            integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
            crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-migrate-3.3.2.js"
            integrity="sha256-BDmtN+79VRrkfamzD16UnAoJP8zMitAz093tvZATdiE="
            crossorigin="anonymous"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            var allOptions = $('#selectprod option')
            $('#selectcat').change(function () {
                $('#selectprod option').remove()
                var classN = $('#selectcat option:selected').prop('class');
                var opts = allOptions.filter('.' + classN);
                $.each(opts, function (i, j) {
                    $(j).appendTo('#selectprod');
                });
            });
        });
    </script>
}
